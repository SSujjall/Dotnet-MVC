@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}

@model NewWeb.Models.AddStudentViewModel

<style>
    .main-form {
        min-width: 50%;
        max-width: 50%;
    }
</style>

<div class="text-center">

    <h1>Student Service</h1>
    <h2>Add Here</h2>

    <!-- WITHOUT AJAX -->
    @* <form method="post" asp-action="AddStudent">
        <section class="Add-Container d-flex justify-content-center">
            <div class="form-control main-form">
                <div class="mt-3">
                    <label class="form-label">Name</label>
                    <input type="text" class="form-control" asp-for="Name" required />
                </div>

                <div class="mt-3">
                    <label class="form-label">Address</label>
                    <input type="text" class="form-control" asp-for="Address" required />
                </div>

                <button type="submit" class="btn btn-success w-50 mt-2">Add</button>
            </div>
        </section>
    </form> *@

    <!--With AJAX-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

    <form id="addStudentForm">
        <section class="Add-Container d-flex justify-content-center">
            <div class="form-control main-form">
                <div class="mt-3">
                    <label class="form-label">Name</label>
                    <input type="text" class="form-control" asp-for="Name" required />
                </div>

                <div class="mt-3">
                    <label class="form-label">Address</label>
                    <input type="text" class="form-control" asp-for="Address" required />
                </div>

                <!-- muni type ma submit ko satta button halne -->
                <button type="button" class="btn btn-success w-50 mt-2" id="addStudentButton">Add</button>
            </div>
        </section>
    </form>
</div>

<script>
    $('#addStudentButton').click(function () {

        var formData = $('#addStudentForm').serialize();

        $.ajax({
            type: 'POST',
            url: '@Url.Action("AddStudent", "Student")',
            data: formData,
            success: function (response) {
                alert("Student Added Successfully!");
                $('#addStudentForm')[0].reset();
            },
            error: function (xhr, status, error) {
                alert("An error occurred while adding the student!");
            }
        });
    });
</script>