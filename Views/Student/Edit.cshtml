@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
}

@model NewWeb.Models.Entities.Student

<style>
    .main-form {
        min-width: 50%;
        max-width: 50%;
    }
</style>

<div class="text-center">
    <h2>Edit</h2>


    @if (Model is null)
    {
        <p>No Students Found</p>
    }
    else
    {
        <!-- Without AJax-->
        @* <form method="post" asp-action="EditStudent">
            <section class="Add-Container d-flex justify-content-center">
                <div class="form-control main-form">

                    <div class="mt-3">
                        <label class="form-label">Id</label>
                        <input type="text" class="form-control" asp-for="Id" readonly />
                    </div>

                    <div class="mt-3">
                        <label class="form-label">Name</label>
                        <input type="text" class="form-control" asp-for="Name" required />
                    </div>

                    <div class="mt-3">
                        <label class="form-label">Address</label>
                        <input type="text" class="form-control" asp-for="Address" required />
                    </div>

                    <button type="submit" class="btn btn-success w-50 mt-2">Save</button>
                </div>
            </section>
        </form> *@

        <!-- With AJax-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

        <form id="editStudentForm" asp-action="EditStudent">
            <section class="Add-Container d-flex justify-content-center">
                <div class="form-control main-form">

                    <div class="mt-3">
                        <label class="form-label">Id</label>
                        <input type="text" class="form-control" asp-for="Id" readonly />
                    </div>

                    <div class="mt-3">
                        <label class="form-label">Name</label>
                        <input type="text" class="form-control" asp-for="Name" required />
                    </div>

                    <div class="mt-3">
                        <label class="form-label">Address</label>
                        <input type="text" class="form-control" asp-for="Address" required />
                    </div>

                    <button type="button" id="editStudentButton" class="btn btn-success w-50 mt-2">Save</button>
                </div>
            </section>
        </form>
    }
</div>

<script>
    $('#editStudentButton').click(function () {
        var formData = $('#editStudentForm').serialize();

        $.ajax({
            type: 'POST',
            url: '@Url.Action("EditStudent", "Student")',
            data: formData,
            success: function (response) {
                alert("Edited Successfully!");
            },
            error: function (xhr, status, error) {
                alert("An error occurred while editing the student!");
            }
        });
    });
</script>